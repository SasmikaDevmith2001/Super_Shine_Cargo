  // Get the contact form
  const form = document.getElementById('contact-form');
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const submitButton = form.querySelector('.form-submit');
      const originalText = submitButton.textContent;

      submitButton.textContent = 'Sending...';
      submitButton.disabled = true;

      // Collect form data
      const formData = Object.fromEntries(new FormData(form));

      // Simple validation
      const requiredFields = ['firstName', 'lastName', 'email', 'service', 'message'];
      for (const field of requiredFields) {
        if (!formData[field]) {
          alert('Please fill in all required fields.');
          submitButton.textContent = originalText;
          submitButton.disabled = false;
          return;
        }
      }

      // Environment variables
      const SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;
      const SUPABASE_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;

      if (!SUPABASE_URL || !SUPABASE_KEY) {
        alert('Configuration error. Supabase credentials not found.');
        console.error('Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY');
        submitButton.textContent = originalText;
        submitButton.disabled = false;
        return;
      }

      // Full Edge Function URL
      const functionUrl = 'https://lwcdhsakltnxolsxpjvb.supabase.co/functions/v1/send-contact-email';

      try {
        const response = await fetch(functionUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${SUPABASE_KEY}`,
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (response.ok && result.success) {
          alert('Thank you for your message! We will get back to you within 24 hours.');
          form.reset();
        } else {
          console.error('Error response from function:', result);
          throw new Error(result.error || 'Failed to send message.');
        }

      } catch (err) {
        console.error('Fetch error:', err);
        alert('Sorry, there was an error sending your message. Please try again or contact us directly.');
      } finally {
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      }
    });
  }

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

  console.log("Supabase URL:", import.meta.env.VITE_SUPABASE_URL);
  console.log("Supabase Key:", import.meta.env.VITE_SUPABASE_ANON_KEY?.slice(0, 10) + "...");